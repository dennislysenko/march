<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>March by dslysenko</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">March</h1>
      <h2 class="project-tagline">a go deployment tool, insanely lightweight and not unlike capistrano, written in ruby</h2>
      <a href="https://github.com/dslysenko/march" class="btn">View on GitHub</a>
      <a href="https://github.com/dslysenko/march/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dslysenko/march/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="march---a-go-deployment-tool-written-in-ruby" class="anchor" href="#march---a-go-deployment-tool-written-in-ruby" aria-hidden="true"><span class="octicon octicon-link"></span></a>march - a go deployment tool written in ruby</h1>

<p>March is an in-house deployment tool that acts as an insanely lightweight capistrano and allows you to build and deploy
a go package to run as a pseudo-daemon on remote servers without any hassle.</p>

<p><strong>It takes a minute to set up and makes your deploy workload almost nil.</strong></p>

<h2>
<a id="setup" class="anchor" href="#setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>setup</h2>

<p>Create a <code>march</code> directory containing a single file: <code>config.yml</code>. Add <code>march/build</code> to your <code>.gitignore</code> as that is 
where intermediate binaries are stored.</p>

<p>In this file, you can specify the following options:</p>

<pre><code># Specifies the remote path to which march will deploy.
deploy_path: /home/deploy/yourscript

# Specify extra env vars. 
env:
  ENV_FILENAME: /home/deploy/yourscript/.env

# The name of the binary generated by `go build`. 
go_binary_name: yourscript

# This is the base property list that is applied to all servers in all stages.
# Anything specified in the config for a specific server will override these defaults.
# e.g. if I created a server below (under stages) and specified go_os: windows, it would 
server_defaults:
  go_os: linux
  user: deploy
  port: 22

stages:
  staging:
    servers:
      - host: staging.yourapp.com

  production:
    servers:
      - host: app-1.yourapp.com
        port: 2222
      - host: app-2.yourapp.com
      - host: app-3.yourapp.com
</code></pre>

<p>All files in the assets/ folder in your Go source directly will be copied directly to the server and can be accessed at
<code>os.Getenv('MARCH_ASSETS_PATH')</code>.</p>

<h2>
<a id="commands" class="anchor" href="#commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>commands</h2>

<p><strong>format</strong>: <code>march {stage} {command}</code></p>

<ul>
<li>
<code>deploy</code>: builds your go package into a binary and uploads it along with some support files to your <code>deploy_path</code> on 
all servers matching that stage.</li>
<li>
<code>logs</code>: tails the logs of your go program</li>
</ul>

<h2>
<a id="issues" class="anchor" href="#issues" aria-hidden="true"><span class="octicon octicon-link"></span></a>issues</h2>

<p>Feel free to log any issues, inconsistencies, or non-user-friendliness you find on the github issue tracker for this 
repository.</p>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>todo</h2>

<ul>
<li>Reevaluate the logging system</li>
<li>Fully daemonize the go binary process so it continues running through server restarts</li>
<li>Deploy versioning (capistrano-style)

<ul>
<li>rollback to previous deploys</li>
</ul>
</li>
<li>Zero-downtime deployment</li>
<li>Reevaluate how march kills already-running processes, right now it terminates them completely off-hand

<ul>
<li>maybe send an interrupt allowing the server to shut down gracefully, and terminate the process after a set, 
<code>config.yml</code>-specifiable amount of time</li>
</ul>
</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dslysenko/march">March</a> is maintained by <a href="https://github.com/dslysenko">dslysenko</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
